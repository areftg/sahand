import React, { useMemo } from 'react'
import style from "./HozorDeck.module.css"
import { NavLink } from "react-router-dom";
import student from "../../assets/icons/student.svg"


const useAuth = () => {
    const user = useMemo(() => {
        const userString = localStorage.getItem("user");
        if (userString) {
            try {
                return JSON.parse(userString);
            } catch (error) {
                console.error("خطا در تجزیه (parse) اطلاعات کاربر از localStorage:", error);
                return null;
            }
        }
        return null;
    }, []);
    return { user };
};

export default function HozorDeck() {
    const { user } = useAuth();

    if (user?.role?.name === "teacher" || user?.role?.name === "deputy-educational" || user?.role?.name === "deputy-executive") {
        return (
            <div className={style.HozorDeck}>
                <NavLink className={style.link} to="/hozor" end>حضور و غیاب<div className={style.indicator}><svg width="38" height="42" viewBox="0 0 38 42" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M16.3302 0.875C10.9352 0.875 6.5459 5.26425 6.5459 10.6593C6.5459 16.0544 10.9352 20.4437 16.3302 20.4437C21.7253 20.4437 26.1146 16.0544 26.1146 10.6593C26.1146 5.26425 21.7253 0.875 16.3302 0.875ZM27.093 20.4437C21.149 20.4437 16.3302 25.2625 16.3302 31.2064C16.3302 37.1504 21.149 41.9692 27.093 41.9692C33.037 41.9692 37.8558 37.1504 37.8558 31.2064C37.8558 25.2625 33.037 20.4437 27.093 20.4437ZM5.07825 24.3574C2.65075 24.3574 0.675293 26.3329 0.675293 28.7604V29.9337C0.675293 35.5852 7.55173 40.0124 16.3302 40.0124C16.8557 40.0124 17.3731 39.994 17.8839 39.9627C15.7147 37.681 14.3734 34.6036 14.3734 31.2064C14.3734 28.6821 15.1176 26.3358 16.3857 24.3574H5.07825ZM32.9636 26.3143C33.2138 26.3143 33.4641 26.4096 33.6554 26.6009C34.038 26.9835 34.038 27.6019 33.6554 27.9845L25.8279 35.812C25.6371 36.0028 25.3866 36.0986 25.1361 36.0986C24.8857 36.0986 24.6351 36.0028 24.4444 35.812L20.5306 31.8982C20.1481 31.5157 20.1481 30.8972 20.5306 30.5147C20.9132 30.1321 21.5316 30.1321 21.9142 30.5147L25.1361 33.7366L32.2718 26.6009C32.4631 26.4096 32.7134 26.3143 32.9636 26.3143Z" fill="white" />
                </svg>
                </div></NavLink>
                {user?.role?.name === "teacher" && <>
                <NavLink className={style.link} to="GiveScore">نمره دهی<div className={style.indicator}><svg width="38" height="42" viewBox="0 0 38 42" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M37.7026 4.98442H24.9962C24.1476 2.59479 21.8895 0.875 19.2102 0.875C16.5308 0.875 14.2727 2.59479 13.4241 4.98442H0.717773V41.9692H37.7026V4.98442ZM17.1555 33.7504H8.93662V29.641H17.1555V33.7504ZM17.1555 21.4221H8.93662V17.3127H17.1555V21.4221ZM19.2102 9.09384C18.076 9.09384 17.1555 8.17333 17.1555 7.03913C17.1555 5.90493 18.076 4.98442 19.2102 4.98442C20.3444 4.98442 21.2649 5.90493 21.2649 7.03913C21.2649 8.17333 20.3444 9.09384 19.2102 9.09384ZM31.5364 32.8977L28.631 35.8051L26.4017 33.5737L24.1702 35.8051L21.2649 32.8997L23.4963 30.6683L21.2649 28.4369L24.1702 25.5315L26.4017 27.7629L28.631 25.5315L31.5364 28.4369L29.307 30.6683L31.5364 32.8977ZM31.5364 20.5715L28.631 23.4768L26.4017 21.2454L24.1702 23.4768L21.2649 20.5715L23.4963 18.34L21.2649 16.1086L24.1702 13.2033L26.4017 15.4347L28.631 13.2053L31.5364 16.1107L29.307 18.34L31.5364 20.5715Z" fill="black" />
                </svg>
                </div></NavLink>
                </>}

                {user?.role?.name === "teacher"  && <>
                <NavLink className={style.link} to="Todo">یادآوری ها<div className={style.indicator}><svg width="45" height="42" viewBox="0 0 45 42" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M2.99524 0.875977C1.45202 0.875977 0.193359 2.13463 0.193359 3.67786V8.34766H12.3348V0.875977H2.99524ZM14.2028 0.875977V8.34766H27.2782V0.875977H14.2028ZM29.1461 0.875977V8.34766H41.2876V3.67786C41.2876 2.13463 40.0289 0.875977 38.4857 0.875977H29.1461ZM0.193359 10.2156V17.6873H12.3348V10.2156H0.193359ZM14.2028 10.2156V17.6873H27.2782V10.2156H14.2028ZM29.1461 10.2156V17.6873H41.2876V10.2156H29.1461ZM0.193359 19.5552V27.0269H12.3348V19.5552H0.193359ZM14.2028 19.5552V27.0269H27.2782V19.5552H14.2028ZM27.2782 27.0269C26.8477 27.596 26.4902 28.2344 26.1983 28.8948H14.2028V36.3665H26.1983C27.6503 39.6536 30.9447 41.9702 34.7499 41.9702C39.8867 41.9702 44.0895 37.7674 44.0895 32.6306C44.0895 30.033 43.0132 27.6726 41.2876 25.9762V19.5552H29.1461V25.1881C28.4456 25.7171 27.8072 26.3264 27.2782 27.0269ZM34.7499 25.1589C35.0053 25.1589 35.257 25.1626 35.5087 25.1881C35.5963 25.1991 35.6838 25.2064 35.7714 25.2173C35.8298 25.2246 35.8881 25.2355 35.9465 25.2465C36.2128 25.2903 36.4755 25.3778 36.7345 25.4508C36.7418 25.4544 36.7564 25.4471 36.7637 25.4508C36.771 25.4544 36.7856 25.4471 36.7929 25.4508C36.8513 25.469 36.9097 25.4909 36.968 25.5092C37.2015 25.5821 37.4168 25.6478 37.6393 25.7427C37.6685 25.7536 37.6977 25.7609 37.7269 25.7718C37.8035 25.8047 37.8838 25.8521 37.9604 25.8886C38.1793 25.9944 38.3945 26.1148 38.6025 26.2388C38.6244 26.2534 38.6389 26.2826 38.6608 26.2972C38.9563 26.4796 39.2409 26.6584 39.5072 26.8809C39.7225 27.0597 39.9268 27.264 40.1201 27.4646C40.2515 27.6033 40.3792 27.7273 40.4996 27.8733C40.5871 27.9791 40.6783 28.0812 40.7622 28.1943C40.8243 28.2782 40.879 28.3694 40.9374 28.457C41.0578 28.6357 41.1818 28.8218 41.2876 29.0115V29.0407C41.875 30.106 42.2216 31.3318 42.2216 32.6306C42.2216 36.7386 38.8578 40.1023 34.7499 40.1023C31.9991 40.1023 29.5985 38.5956 28.2997 36.3665C28.1392 36.0928 27.986 35.8156 27.8619 35.5201C27.7634 35.2902 27.705 35.064 27.6284 34.8196C27.5847 34.6773 27.5482 34.5277 27.5117 34.3818C27.4606 34.1811 27.3986 33.9768 27.3658 33.7689C27.3548 33.6923 27.3475 33.6157 27.3366 33.5354C27.3001 33.2362 27.2782 32.9407 27.2782 32.6306C27.2782 30.759 27.9969 29.0407 29.1461 27.7273V27.6981C29.3139 27.5084 29.5146 27.3151 29.7007 27.1436C29.7992 27.0524 29.8904 26.9648 29.9925 26.8809C30.0399 26.8408 30.091 26.8007 30.1385 26.7642C30.2552 26.673 30.3683 26.5854 30.4887 26.5015C30.5471 26.4614 30.6054 26.4212 30.6638 26.3848C30.7514 26.3264 30.8353 26.2644 30.9265 26.2096C31.1454 26.0783 31.3935 25.9689 31.6269 25.8594C31.8458 25.7573 32.0684 25.677 32.2982 25.5967C32.3384 25.5821 32.3748 25.5529 32.415 25.5384C32.685 25.4471 32.9768 25.3632 33.2614 25.3049C33.7393 25.2064 34.2428 25.1589 34.7499 25.1589ZM33.8159 27.0269V32.1636L30.4595 34.6737L31.5686 36.1913L35.6838 33.0976V27.0269H33.8159ZM0.193359 28.8948V35.4325C0.193359 35.9506 0.612912 36.3665 1.12732 36.3665H12.3348V28.8948H0.193359Z" fill="black" />
                </svg>
                </div></NavLink>
                </>}

                {user?.role?.name !== "teacher" && (<NavLink className={style.link} to="Discipline">
                    انضباط
                <div className={style.indicator}>
                    <svg width="17" height="21" viewBox="0 0 17 21" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M15.9239 5.88163L10.9239 0.881635C10.7793 0.737019 10.5839 0.65625 10.38 0.65625H2.30311C1.45311 0.65625 0.764648 1.34471 0.764648 2.19471V19.1178C0.764648 19.9678 1.45311 20.6562 2.30311 20.6562H14.6108C15.4608 20.6562 16.1493 19.9678 16.1493 19.1178V6.42548C16.1493 6.22163 16.0685 6.02625 15.9239 5.88163ZM10.7646 15.2716H4.6108C4.18619 15.2716 3.84157 14.927 3.84157 14.5024C3.84157 14.0778 4.18619 13.7332 4.6108 13.7332H10.7646C11.1893 13.7332 11.5339 14.0778 11.5339 14.5024C11.5339 14.927 11.1893 15.2716 10.7646 15.2716ZM12.3031 12.1947H4.6108C4.18619 12.1947 3.84157 11.8501 3.84157 11.4255C3.84157 11.0009 4.18619 10.6562 4.6108 10.6562H12.3031C12.7277 10.6562 13.0723 11.0009 13.0723 11.4255C13.0723 11.8501 12.7277 12.1947 12.3031 12.1947ZM10.7646 6.8101C10.34 6.8101 9.99542 6.46548 9.99542 6.04087V2.12087L14.6846 6.8101H10.7646Z" fill="black"/>
</svg>
                </div>
                </NavLink>)}

            </div>
        )
    }

    return null
}


